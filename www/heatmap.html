<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
        <meta name="description" content="">
        <meta name="author" content="">
        <!--<link rel="icon" href="../../favicon.ico">-->
        <title>WebGazer: Data Visualization</title>

        <!-- Bootstrap core CSS -->
        <link href="css/bootstrap.min.css" rel="stylesheet">

        <link rel="stylesheet" href="css/highlight/styles/default.css">
        <script src="css/highlight/highlight.pack.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>

<style type="text/css">
body {
    position: relative;
    min-height: 2000px;
    padding-top: 50px;
}

.padright {
    padding-top: 0px;
    margin-bottom: 22px;
}
.pad {
    padding-top: 10px;
    margin-bottom: 20px;
}

.jumbotron p {
    font-size: 16px;
}

p > code.hljs { display: inline; }

</style>

</head>
    <body data-spy="scroll" data-target="#navbar">

        <nav class="navbar navbar-default navbar-fixed-top">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="https://webgazer.cs.brown.edu/">WebGazer.js</a>
                </div>
                <div id="navbar" class="navbar-collapse collapse">
                    <ul class="nav navbar-nav nav-tabs" role="tablist">
                        <li class="active"><a href="https://webgazer.cs.brown.edu/#home">Home</a></li>
                        <li><a href="https://webgazer.cs.brown.edu/#video">About</a></li>
                        <li><a href="https://webgazer.cs.brown.edu/#usage">Usage</a></li>
                        <li><a href="https://webgazer.cs.brown.edu/#support">Support</a></li>
                        <li><a href="https://webgazer.cs.brown.edu/#download">Download</a></li>
                        <li><a href="https://webgazer.cs.brown.edu/documentation">Documentation</a></li>
                        <li><a href="https://webgazer.cs.brown.edu/#examples">Examples</a></li>
                        <li><a href="https://webgazer.cs.brown.edu/#publication">Publication</a></li>
                        <li><a href="https://webgazer.cs.brown.edu/#press">Press</a></li>
                        <li><a href="https://webgazer.cs.brown.edu/#contact">Contact</a></li>
                    </ul>
                </div>
            </div>
        </nav>

        <div id="heatmap-home" class="container pad" style="padding-top: 0px">
            <div class="jumbotron">
                <h2 class="text-center" style="margin-bottom:0px">Data Visualization</h2>
            </div>
            <hr class="featurette-divider">
           <a href="https://www.patrick-wied.at/static/heatmapjs/">Heatmap.js</a>, created by <a href="https://www.patrick-wied.at">Patrick Wied,</a> is a "lightweight, easy to use JavaScript library to help you visualize your three dimensional data!" <a href="https://www.patrick-wied.at/static/heatmapjs/get-heatmap.html">Download</a> the library and save the <code class="javascript">heatmap.js</code> file into the same directory as your site's javascript files. View the <a href="https://www.patrick-wied.at/static/heatmapjs/docs.html">documentation</a> and then follow this quick tutorial to implement the library with your WebGazer data.
        </div>

        <div id="video" class="container pad">
            <hr class="featurette-divider">
            <h2 class="text-center" style="margin-bottom:0px">Live Demo</h2><br><p class="text-center padright" style="font-size:20px">This demo does not work with an ad-blocker.</p>
            <div id="heatmapContainer" style="margin: auto; width: 100%; height: auto; max-width: 700px">
                    <img id="webgazer-pic" src="./media/heatmap-demo.png" style="width: 100%; height: auto; max-width: 700px">
            </div>
            <script src="./js/heatmap.js"></script>
            <script src="https://code.jquery.com/jquery-1.11.0.min.js"></script>
            <script src="./js/heatmap-data.js"></script>
            <script src="./js/heatmap-webgazer.js"></script>
       </div>

        <div id="heatmap-usage" class="container pad">
            <hr class="featurette-divider">
            <h2 class="text-center">Usage</h2>
            <br>Begin by creating a div element that will house all of the heatmap's visual rendering on your page.
            
<pre><code class="html">&lt;!-- Heatmap Container --&gt;
&lt;div id="heatmapContainer">&lt;div&gt;</code></pre>

            <p><br>Create HTML script elements that import the javascript files needed for the visualization. The script element needs to be given the location that the <code class="javascript">heatmap.js</code> file is stored. <b>Note:</b> The period in <code class="javascript">"./js/heatmap.js"</code> represents the current directory.</p>

<pre><code class="html">&lt;!-- Script Element --&gt;
&lt;script src="./js/heatmap.js"&gt;&lt;script&gt; 
</code></pre>

<p><br>Initialize a heatmap instance with a few lines of javascript.</p>
<pre><code class="javascript hljs">var heatmap = h337.create({
    container: document.getElementById('heatmapContainer') // refers to the container that you created above
});
</code></pre>

            <p><code class="javascript">Heatmap.js</code> supports many kinds of visual configurations that change the heatmaps appearance. View these settings in the initialization <a href="https://www.patrick-wied.at">documentation.</a><p>
            <p><br>Calling the <code class="javascript">setData()</code> function on the <code class="javascript">heatmap</code> variable: <code class="javascript">heatmap.setData(data)</code> allows the user to provide the heatmap instance with data to display. The data has to be in JSON format, below is an example of how the information should be structured.</p>

<pre><code class="javascript hljs">{
    max: 5, // A maximum value is optional
    min: 0, // A minimum value is optional
    data: [{ x: 10, y: 15, value: 5}, ...] // Note that the data paramater is an array of json objects with x, y, and value variables
}</code></pre>

            If your data is stored as a CSV File, start by converting your CSV file into a JSON Object, a quick online search of "CSV to JSON" will return sites that can help with this. Once you have a <code class="javascript">.json</code> file, check that the embedded JSON array has a key value of <code class="javascript">data</code> like in the JSON Object structure above. The script given later operates under the assumption that the array is referred to as <code class="javascript">data</code>

            <p><br>Edit your <code class="javascript">.json</code> file by inserting <code class="javascript">var heatmap_data =</code> infront of your JSON Object and then replace the <code class="javascript">.json</code> extension with <code class="javascript">.js</code>. Thus <code class="javascript">heatmap-data.json</code> would appear in explorer as <code class="javascript">heatmap-data.js</code>.</p>

<pre><code class="javascript hljs">var heatmap_data = {
    max: 5, // A maximum value is optional
    min: 0, // A minimum value is optional
    data: [{ x: 10, y: 15, value: 5}, ...] // Note that the data paramater is an array of json objects with x, y, and value variables
}</code></pre>

            <p><br>Import the <code class="javascript">heatmap-data.js</code> file into your HTML page, similarly to the second step of this guide.</p>

<pre><code class="html">&lt;!-- Script Element --&gt;
&lt;script src="./js/heatmap.js"&gt;&lt;script&gt; 
&lt;script src="./js/heatmap-data.js"&gt;&lt;script&gt; // the file we just created is now imported
</code></pre>

            <p>Importing the <code class="javascript">heatmap-data.js</code> gives the heatmap instance access to the information to be displayed. <br><br>The script below displays the data sequentially at a constant rate and can be downloaded at the end of this page. The different variables in the script can be set to different timings: <code class="javascript">initial_delay</code> is the amount of time after the webpage finishes loading before starting the visualization and <code class="javascript">heatmap_display_delay</code> is the amount of time between each additional point being displayed. <b>Note:</b> All times are represented in milliseconds.</p>

<pre><code class="javascript hljs">var initial_delay = 1500; // visualization delay after the window has loaded (milliseconds)
var heatmap_display_delay = 25; // sets a 25 millisecond delay before each new point is displayed
var heatmap_data_counter = 0;
var heatmap_data_length = heatmap_data.data.length;
var heatmap_timer;
var heatmap_displayed_data = {data:[]}; // starts off empty but clones the data to display point by point

var repeat = true; // Whether to repeat the simulation in a continous loop

// function that initializes the visulaization by repeatedly calling heatmap_display_function()
function heatmap_trigger_display() { 

    heatmap_timer = setInterval(heatmap_display_function, heatmap_display_delay); // sets the interval between each point displaying
    heatmap_data_counter++;
}

function heatmap_display_function() {

    console.log("Starting Simulation");
    if(heatmap_data_counter == heatmap_data_length) {

        if(repeat){

            console.log("Reset Simulation");
            var empty_data = {
                data : {}
            };
            heatmap.setData(empty_data);
            heatmap_displayed_data = {data:[]};
            heatmap_data_counter = 0;
        } else {
            clearInterval(heatmap_timer);
        }

    }

    heatmap_displayed_data.data.push(heatmap_data.data[heatmap_data_counter]);
    heatmap.setData(heatmap_displayed_data); // renders the data on the screen
    heatmap_data_counter++;
}

setTimeout(function () {heatmap_trigger_display();}, initial_delay); // starts displaying the points after the inital delay time has run out</code></pre>

            <p><br>Save the script as <code class="javascript">heatmap-webgazer.js</code> or download it below, into the same location as the rest of your <code class="javascript">.js</code> files. Import this script into the HTML.</p>

<pre><code class="html">&lt;!-- Script Element --&gt;
&lt;script src="./js/heatmap.js"&gt;&lt;script&gt; 
&lt;script src="./js/heatmap-data.js"&gt;&lt;script&gt;
&lt;script src="./js/heatmap-webgazer.js"&gt;&lt;script&gt; // import the file we just created</code></pre>

        </div>


        <div id="Download" class="container pad">
           <hr class="featurette-divider">
           <h2 class="text-center">Download</h2>
           <div class="row">
               <div class="col-lg-4">
                    <h4 class="text-center">    
                            <a href="/js/heatmap-webgazer.js" download>Sample Code</a>
                    </h4>
                </div>
                <div class="col-lg-4">
                    <h4 class="text-center">    
                            <a href="/js/heatmap-data.js" download>Sample Data</a>
                    </h4>
                </div>
                <div class="col-lg-4">
                    <h4 class="text-center">    
                            <a href="/heatmap-demo.html" download>Sample HTML</a>
                    </h4>
                </div>
           </div>
        </div>

        <hr class="featurette-divider">
        <div id="contact" class="container pad">
            <h2 class="text-center pad">Acknowledgements</h2>
            <div class="col-lg">
                <img class="img-circle center-block" src="media/elvis.jpg" alt="Elvis Kahoro" height="140">
                <h4 class="text-center"><a href="http://www.elvis.ai">Elvis Kahoro</a></h4>
                <p align="center">Undergraduate Student '20 at <a href="https://www.pomona.edu/">Pomona College</a></p>
            </div>
        </div>

        <div id="license" class="container pad">
            <hr class="featurette-divider">
            <h2 class="text-center">License</h2>
            <p class="text-center">Copyright (C) 2018 <a href="http://hci.cs.brown.edu">Brown HCI Group</a><br>
                Licensed under <a href="http://www.gnu.org/licenses/gpl-3.0.en.html">GPLv3</a>.
            </p>
        </div>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
        <script src="js/bootstrap.min.js"></script>
    </body>
</html>